(function(q){function ha(d){!d||void 0!==d.allowPageScroll||void 0===d.swipe&&void 0===d.swipeStatus||(d.allowPageScroll="none");void 0!==d.click&&void 0===d.tap&&(d.tap=d.click);d||(d={});d=q.extend({},q.fn.swipe.defaults,d);return this.each(function(){var b=q(this),l=b.data("TouchSwipe");l||(l=new ia(this,d),b.data("TouchSwipe",l))})}function ia(d,b){function D(a){if(!0!==c.data("TouchSwipe_intouch")&&!(0<q(a.target).closest(b.excludedElements,c).length)){var f=a.originalEvent?a.originalEvent:a,
ja=l?f.touches[0]:f;g="start";l?h=f.touches.length:a.preventDefault();m=0;w=n=null;y=z=k=0;u=1;x=0;a=[];for(var e=0;5>=e;e++)a.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});p=a;a={};a.left=H("left");a.right=H("right");a.up=H("up");a.down=H("down");I=a;J=E=0;if(!l||h===b.fingers||"all"===b.fingers||F()){if(P(0,ja),K=A(),2==h&&(P(1,f.touches[1]),z=y=Q(p[0].start,p[1].start)),b.swipeStatus||b.pinchStatus)var d=v(f,g)}else d=!1;if(!1===d)return g="cancel",v(f,g),d;L(!0)}}function R(a){var f=a.originalEvent?
a.originalEvent:a;if("end"!==g&&"cancel"!==g&&!Y()){var c=Z(l?f.touches[0]:f);G=A();l&&(h=f.touches.length);g="move";2==h&&(0==z?(P(1,f.touches[1]),z=y=Q(p[0].start,p[1].start)):(Z(f.touches[1]),y=Q(p[0].end,p[1].end),w=1>u?"out":"in"),u=(y/z).toFixed(2),x=Math.abs(z-y));if(h===b.fingers||"all"===b.fingers||!l||F()){var e=c.start;var d=c.end;e=Math.round(180*Math.atan2(d.y-e.y,e.x-d.x)/Math.PI);0>e&&(e=360-Math.abs(e));e=n=45>=e&&0<=e?"left":360>=e&&315<=e?"left":135<=e&&225>=e?"right":45<e&&135>
e?"down":"up";if("none"===b.allowPageScroll||F())a.preventDefault();else switch(d="auto"===b.allowPageScroll,e){case "left":(b.swipeLeft&&d||!d&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case "right":(b.swipeRight&&d||!d&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case "up":(b.swipeUp&&d||!d&&"vertical"!=b.allowPageScroll)&&a.preventDefault();break;case "down":(b.swipeDown&&d||!d&&"vertical"!=b.allowPageScroll)&&a.preventDefault()}a=c.start;e=c.end;m=Math.round(Math.sqrt(Math.pow(e.x-
a.x,2)+Math.pow(e.y-a.y,2)));k=G-K;a=n;e=m;e=Math.max(e,I[a].distance);I[a].distance=e;if(b.swipeStatus||b.pinchStatus)var D=v(f,g);if(!b.triggerOnTouchEnd||b.triggerOnTouchLeave){a=!0;if(b.triggerOnTouchLeave){var r=q(this);var t=r.offset();a=t.left;e=t.left+r.outerWidth();d=t.top;r=t.top+r.outerHeight();c=c.end;a=c.x>a&&c.x<e&&c.y>d&&c.y<r}!b.triggerOnTouchEnd&&a?g=S("move"):b.triggerOnTouchLeave&&!a&&(g=S("end"));"cancel"!=g&&"end"!=g||v(f,g)}}else g="cancel",v(f,g);!1===D&&(g="cancel",v(f,g))}}
function T(a){var f=a.originalEvent;if(l&&0<f.touches.length)return E=A(),J=event.touches.length+1,!0;Y()&&(h=J);a.preventDefault();G=A();k=G-K;U()?(g="cancel",v(f,g)):b.triggerOnTouchEnd||0==b.triggerOnTouchEnd&&"move"===g?(g="end",v(f,g)):!b.triggerOnTouchEnd&&b.tap?(g="end",t(f,g,"tap")):"move"===g&&(g="cancel",v(f,g));L(!1)}function B(){y=z=K=G=h=0;u=1;J=E=0;L(!1)}function V(a){a=a.originalEvent;b.triggerOnTouchLeave&&(g=S("end"),v(a,g))}function aa(){c.unbind(M,D);c.unbind("touchcancel",B);c.unbind(W,
R);c.unbind(X,T);C&&c.unbind(C,V);L(!1)}function S(a){var f=a,c=b.maxTimeThreshold?k>=b.maxTimeThreshold?!1:!0:!0,e=ba(),d=U();!c||d?f="cancel":!e||"move"!=a||b.triggerOnTouchEnd&&!b.triggerOnTouchLeave?!e&&"end"==a&&b.triggerOnTouchLeave&&(f="cancel"):f="end";return f}function v(a,f){var c=void 0;ca()&&da()||da()?c=t(a,f,"swipe"):(ea()&&F()||F())&&!1!==c&&(c=t(a,f,"pinch"));fa()&&b.doubleTap&&!1!==c?c=t(a,f,"doubletap"):k>b.longTapThreshold&&10>m&&b.longTap&&!1!==c?c=t(a,f,"longtap"):!(1!==h&&l||
!isNaN(m)&&0!==m)&&b.tap&&!1!==c&&(c=t(a,f,"tap"));"cancel"===f&&B(a);"end"===f&&(l?0==a.touches.length&&B(a):B(a));return c}function t(a,f,d){var e=void 0;if("swipe"==d){c.trigger("swipeStatus",[f,n||null,m||0,k||0,h]);if(b.swipeStatus&&(e=b.swipeStatus.call(c,a,f,n||null,m||0,k||0,h),!1===e))return!1;if("end"==f&&ca()){c.trigger("swipe",[n,m,k,h]);if(b.swipe&&(e=b.swipe.call(c,a,n,m,k,h),!1===e))return!1;switch(n){case "left":c.trigger("swipeLeft",[n,m,k,h]);b.swipeLeft&&(e=b.swipeLeft.call(c,a,
n,m,k,h));break;case "right":c.trigger("swipeRight",[n,m,k,h]);b.swipeRight&&(e=b.swipeRight.call(c,a,n,m,k,h));break;case "up":c.trigger("swipeUp",[n,m,k,h]);b.swipeUp&&(e=b.swipeUp.call(c,a,n,m,k,h));break;case "down":c.trigger("swipeDown",[n,m,k,h]),b.swipeDown&&(e=b.swipeDown.call(c,a,n,m,k,h))}}}if("pinch"==d){c.trigger("pinchStatus",[f,w||null,x||0,k||0,h,u]);if(b.pinchStatus&&(e=b.pinchStatus.call(c,a,f,w||null,x||0,k||0,h,u),!1===e))return!1;if("end"==f&&ea())switch(w){case "in":c.trigger("pinchIn",
[w||null,x||0,k||0,h,u]);b.pinchIn&&(e=b.pinchIn.call(c,a,w||null,x||0,k||0,h,u));break;case "out":c.trigger("pinchOut",[w||null,x||0,k||0,h,u]),b.pinchOut&&(e=b.pinchOut.call(c,a,w||null,x||0,k||0,h,u))}}if("tap"==d){if("cancel"===f||"end"===f)clearTimeout(N),b.doubleTap&&!fa()?(r=A(),N=setTimeout(q.proxy(function(){r=null;c.trigger("tap",[a.target]);b.tap&&(e=b.tap.call(c,a,a.target))},this),b.doubleTapThreshold)):(r=null,c.trigger("tap",[a.target]),b.tap&&(e=b.tap.call(c,a,a.target)))}else if("doubletap"==
d){if("cancel"===f||"end"===f)clearTimeout(N),r=null,c.trigger("doubletap",[a.target]),b.doubleTap&&(e=b.doubleTap.call(c,a,a.target))}else"longtap"!=d||"cancel"!==f&&"end"!==f||(clearTimeout(N),r=null,c.trigger("longtap",[a.target]),b.longTap&&(e=b.longTap.call(c,a,a.target)));return e}function ba(){var a=!0;null!==b.threshold&&(a=m>=b.threshold);return a}function U(){var a=!1;null!==b.cancelThreshold&&null!==n&&(a=I[n].distance-m>=b.cancelThreshold);return a}function ea(){var a=h===b.fingers||"all"===
b.fingers||!l,c=0!==p[0].end.x;var d=null!==b.pinchThreshold?x>=b.pinchThreshold:!0;return a&&c&&d}function F(){return!!(b.pinchStatus||b.pinchIn||b.pinchOut)}function ca(){var a=b.maxTimeThreshold?k>=b.maxTimeThreshold?!1:!0:!0,c=ba(),d=h===b.fingers||"all"===b.fingers||!l,e=0!==p[0].end.x;return!U()&&e&&d&&c&&a}function da(){return!!(b.swipe||b.swipeStatus||b.swipeLeft||b.swipeRight||b.swipeUp||b.swipeDown)}function fa(){if(null==r)return!1;var a=A();return!!b.doubleTap&&a-r<=b.doubleTapThreshold}
function Y(){var a=!1;E&&A()-E<=b.fingerReleaseThreshold&&(a=!0);return a}function L(a){!0===a?(c.bind(W,R),c.bind(X,T),C&&c.bind(C,V)):(c.unbind(W,R,!1),c.unbind(X,T,!1),C&&c.unbind(C,V,!1));c.data("TouchSwipe_intouch",!0===a)}function P(a,b){p[a].identifier=void 0!==b.identifier?b.identifier:0;p[a].start.x=p[a].end.x=b.pageX||b.clientX;p[a].start.y=p[a].end.y=b.pageY||b.clientY;return p[a]}function Z(a){var b=void 0!==a.identifier?a.identifier:0;a:{for(var c=0;c<p.length;c++)if(p[c].identifier==
b){b=p[c];break a}b=void 0}b.end.x=a.pageX||a.clientX;b.end.y=a.pageY||a.clientY;return b}function H(a){return{direction:a,distance:0}}function Q(a,b){var c=Math.abs(a.x-b.x);a=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+a*a))}function A(){return(new Date).getTime()}var O=l||!b.fallbackToMouseEvents,M=O?"touchstart":"mousedown",W=O?"touchmove":"mousemove",X=O?"touchend":"mouseup",C=O?null:"mouseleave",m=0,n=null,k=0,z=0,y=0,u=1,x=0,w=0,I=null,c=q(d),g="start",h=0,p=null,K=0,G=0,E=0,J=0,r=0,
N=null;try{c.bind(M,D),c.bind("touchcancel",B)}catch(a){q.error("events not supported "+M+",touchcancel on jQuery.swipe")}this.enable=function(){c.bind(M,D);c.bind("touchcancel",B);return c};this.disable=function(){aa();return c};this.destroy=function(){aa();c.data("TouchSwipe",null);return c};this.option=function(a,c){if(void 0!==b[a]){if(void 0===c)return b[a];b[a]=c}else q.error("Option "+a+" does not exist on jQuery.swipe.options")}}var l="ontouchstart"in window;q.fn.swipe=function(d){var b=q(this),
l=b.data("TouchSwipe");if(l&&"string"===typeof d){if(l[d])return l[d].apply(this,Array.prototype.slice.call(arguments,1));q.error("Method "+d+" does not exist on jQuery.swipe")}else if(!(l||"object"!==typeof d&&d))return ha.apply(this,arguments);return b};q.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,
swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};q.fn.swipe.phases={PHASE_START:"start",PHASE_MOVE:"move",PHASE_END:"end",PHASE_CANCEL:"cancel"};q.fn.swipe.directions={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down",IN:"in",OUT:"out"};q.fn.swipe.pageScroll={NONE:"none",HORIZONTAL:"horizontal",
VERTICAL:"vertical",AUTO:"auto"};q.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:"all"}})(jQuery);