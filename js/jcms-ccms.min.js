var ccms={CCMS_PROXY_URL:"/proxy/ccms_proxy.aspx",buildSubnav:!1,renderCCMSContentItem:function(e,c,d){$.ajax(this.CCMS_PROXY_URL+"?calltype=json&contentid="+e,{success:function(b,a,e){b.data=$.parseHTML(b.data);if(null!==b.data&&0<b.data.length)for(a=0;a<b.data.length;a++)$(b.data[a]).find("img").each(function(){$(this).attr("src","/"+$(this).attr("src").replace(/\.\.\//g,""))}),$(b.data[a]).find("a").each(function(){if($(this).attr("href")&&-1!==$(this).attr("href").indexOf("#contentid="))try{$(this).click(function(){ccms.renderCCMSContentItem($(this).attr("href").split(/#contentid=/)[1],
c,d)})}catch(g){}});$(c).html(b.data);$("#body-content>div.row").css({"min-height":"300px",height:"initial"});$(d+">div.panel-title>h2").text(b.name);ccms.buildSubnav&&ccms.extendBreadcrumb(b.name)}})},renderCCMSSubnav:function(e,c,d,b){var a=document.createElement("ul");$(a).addClass("panel-sub-menu");"object"===typeof c?$(c).append(a):$("#"+c).append(a);$.ajax(this.CCMS_PROXY_URL+"?calltype=json&listall=true",{success:function(a,g,h){for(h=g=0;h<e.length;h++){for(var f=0;f<a.length;f++)null!==a[f]&&
a[f].contentId===e[h]&&("object"===typeof c?$(c).find("ul").append(ccms.buildCCMSSubnavLink(a[f],d,b,g)):$("#"+c).find("ul").append(ccms.buildCCMSSubnavLink(a[f],d,b,g)));g++}}})},buildCCMSSubnavLink:function(e,c,d,b){console.log(b);var a=document.createElement("li");0===b&&$(a).css({"font-weight":"bold"});a.setAttribute("data-content-id",e.contentId);a.appendChild(document.createTextNode(e.name));$(a).css({cursor:"pointer"});$(a).click(function(){$(this).parent().find("li").each(function(){$(this).css({"font-weight":""})});
$(this).css({"font-weight":"bold"});ccms.renderCCMSContentItem($(this).attr("data-content-id"),c,d)});return a},extendBreadcrumb:function(e){var c=controller.getCleanUrl();$("#breadcrumb").find("li").each(function(){$(this).attr("style")&&$(this).next().remove()});var d=$("#breadcrumb").find("li").last();d.click(function(){document.location=c});$(d).css({cursor:"pointer"});$(d).parent().append("<li> > "+e+"</li>")}};